<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MS Bridal Make-up — Random Flip</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Armata&display=swap" rel="stylesheet">

<style>
:root{
  --card-radius:12px;
  --flip-duration:0.9s;
  --gold: #bf902b;
  --black: #000;
  --transition-fast: 220ms;
  --transition-medium: 320ms;
  --swap-max-height: 160px; /* max height when form is opened */
}

/* Reset & base */
*{box-sizing:border-box;}
body{
  margin:0;
  font-family: sans-serif;
  background: var(--black);
  color: var(--gold);
}

/* ---------------- HEADER ---------------- */
header{
  background: var(--black);
  padding: 10px 12px;
  display: grid;
  grid-template-columns: auto 1fr auto;
  gap: 12px;
  align-items: center;
  max-width: 100%;
  width: 100%;
  border-radius: 0;
  margin: 0 auto;
}

/* Left column (logo + tagline) - center aligned vertically and horizontally inside column */
.header-left {
  display:flex;
  flex-direction:column;
  align-items:center;         /* centered horizontally */
  justify-content:center;     /* centered vertically within column */
  gap:6px;
  text-align:center;
}
.logo{
  width:68px;
  height:68px;
  border-radius:50%;
  overflow:hidden;
  flex-shrink:0;
}
.logo img{ width:100%; height:100%; object-fit:cover; display:block; }
.header-left .tagline{
  font-family: 'Armata', sans-serif;
  font-size:12px;
  line-height:1.1;
  color:var(--gold);
  font-weight:700;
}

/* Center (merged) */
.header-center {
  text-align:center;
  display:flex;
  flex-direction:column;
  align-items:center;
}
.header-center h1{
  font-family:'Lobster', cursive;
  margin:0;
  font-size:34px;
  line-height:1.05;
  color:var(--gold);
  font-weight:700;
  /* glow */
  text-shadow: 0 2px 8px rgba(191,144,43,0.18), 0 6px 24px rgba(191,144,43,0.06);
}
.header-center p{
  margin:6px 0 0;
  font-family:'Armata', sans-serif;
  font-size:14px;
  color:var(--gold);
  font-weight:700;
}

/* Right column — buttons container */
.header-buttons{
  display:flex;
  flex-direction:column; /* desktop default stacked */
  gap:8px;
  align-items:flex-end;
}

.btn-group {
  position: relative;
  width: 100%;
}

/* Button visible by default */
.header-btn {
  display: inline-flex;
  width: 100%;
  justify-content: center;
  align-items: center;
}

/* Form hidden by default */
.inputForm {
  display: none;
  width: 100%;
  gap: 6px;
}

/* Show form instead of button */
.btn-group.active .header-btn {
  display: none;
}

.btn-group.active .inputForm {
  display: flex;
}

/* Input + send button layout */
.mobileInput {
  flex: 1;
  min-width: 100px;
  padding: 8px 10px;
  border-radius: 16px;
  border: 1px solid #bf902b;
  font-size: 12px;
  background: #ffffff;
  color: #000000;
}

/* small send button */
.sendBtn {
  padding: 6px 12px;
  border-radius: 16px;
  border: none;
  background: #bf902b;
  color: #ffffff;
  font-size: 12px;
  font-weight: bold;
  cursor: pointer;
  width: auto;
  opacity: 0.7;
  transition: opacity var(--transition-fast), transform var(--transition-fast);
}
.sendBtn:enabled {
  opacity: 1;
}

/* swap background to show subtle card when open (optional) */
.swap.open .swap-inner {
  background: rgba(255,255,255,0.02);
  padding: 10px;
  border-radius: 20px;
}

/* ---------------- PAGE / GALLERY ---------------- */
.page{
  max-width:1400px;
  margin:10px auto 20px;  /* header not fixed anymore */
  padding:12px;
}

/* gallery grid */
.gallery-container{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
  gap:20px;
}

.gallery-box{
  width:100%;
  aspect-ratio:3/5;
  min-height:280px;
  border-radius:var(--card-radius);
  position:relative;
  overflow:hidden;
  background:#000;
  perspective:1600px;
  cursor:pointer;
}

.gallery-bg,
.gallery-face,
.auto-video{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  border-radius:inherit;
}

.gallery-inner{
  position:absolute;
  inset:0;
  transform-style:preserve-3d;
  transition:transform var(--flip-duration) ease;
}
.gallery-inner.flipped{ transform: rotateY(180deg); }
.gallery-face{ backface-visibility:hidden; }
.gallery-back{ transform:rotateY(180deg); }

/* ---------------- FOOTER ---------------- */
footer{
  margin:20px auto 10px;
  max-width:1400px;
  padding:18px;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:15px;
}
.footer-card{ background:#000; border:0.5px solid var(--gold); display:flex; flex-direction:column; }
.footer-header{ background:linear-gradient(180deg,rgba(191,144,43,1),rgba(150,110,33,1)); padding:12px; text-align:center; font-family:'Armata',sans-serif; font-weight:700; color:#fff; }
.footer-content{ padding:14px 16px; font-family:'Armata',sans-serif; font-weight:700; color:var(--gold); line-height:1.5; }

/* product separator line */
.prod-line {
  border: none;
  height: 1px;
  background: linear-gradient(90deg, rgba(191,144,43,0.12), rgba(191,144,43,0.22));
  margin: 8px 0 6px;
  border-radius: 2px;
}

/* ---------------- RESPONSIVE TWEAKS ---------------- */
@media (max-width: 900px){
  header{ padding:12px; grid-template-columns: auto 1fr; }
  .header-buttons{ grid-column: 2 / -1; justify-self:flex-end; }
  .header-center h1{ font-size:22px; }
  .header-center p{ font-size:12px; margin-top:4px; }
  .page{ margin-top:20px; }  /* FIXED — remove huge gap */
}

/* Mobile: show two buttons side-by-side */
@media (max-width: 700px) {
  .header-buttons {
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    gap: 8px;
  }
  .btn-group { width: 48%; }
  .swap { max-height: 56px; } /* default button height */
  .swap.open { max-height: var(--swap-max-height); }
  .swap-inner { justify-content: center; }
  .mobileInput { font-size: 13px; padding: 8px; }
}

/* Mobile layout: side-by-side buttons */
@media (max-width: 700px) {
  .header-buttons {
    flex-direction: row;           /* horizontal layout */
    justify-content: space-between; /* spread buttons */
    width: 100%;
    gap: 8px;
  }

  .btn-group {
    flex: 1 1 48%;                 /* each button takes ~half width */
  }

  .header-btn {
    width: 100%;                   /* fill btn-group */
    text-align: center;
  }

  .inputForm {
    width: 100%;                   /* form fills button space */
    flex-direction: row;
  }

  .mobileInput {
    width: 100%;
  }
}


  
/* visual focus states */
.header-btn:focus,
.mobileInput:focus,
.sendBtn:focus{ outline: 2px solid rgba(191,144,43,0.3); outline-offset:2px; border-radius:18px; }
</style>
</head>
<body>

<header>

  <!-- left: logo + tagline -->
  <div class="header-left">
    <div class="logo"><img src="logo/l.JPG" alt="MS logo"></div>
    <div class="tagline">Transforming Brides<br>to their dream selves</div>
  </div>

  <!-- center: merged header content -->
  <div class="header-center">
    <h1>MS Bridal Make-up Artist • Pune</h1>
    <p>पुण्यातील परवडणाऱ्या वधूंचा मेकअप</p>
    <p>Bridal | Hair-Style | Saree Drape</p>
    <p>Engagement | Sangeet | Reception | Mehendi</p>
  </div>

  <!-- right: header buttons -->
  <div class="header-buttons" aria-hidden="false">

    <div class="btn-group trial" data-type="trial" aria-label="Bridal trial">
      <div class="swap" aria-expanded="false">
        <div class="swap-inner">
          <!-- Button visible by default -->
          <button class="header-btn" type="button" aria-expanded="false">Bridal trial @ just 1,000/-</button>

          <!-- Form hidden by default inside swap -->
          <div class="inputForm" aria-hidden="true">
            <input class="mobileInput" inputmode="numeric" pattern="[0-9]*" maxlength="10" placeholder="Mobile Number" aria-label="Mobile number for trial">
            <button class="sendBtn" type="button" disabled>Send</button>
          </div>
        </div>
      </div>
    </div>

    <div class="btn-group enquiry" data-type="enquiry" aria-label="Connect to makeup artist">
      <div class="swap" aria-expanded="false">
        <div class="swap-inner">
          <button class="header-btn" type="button" aria-expanded="false">Connect to Makeup Artist</button>

          <div class="inputForm" aria-hidden="true">
            <input class="mobileInput" inputmode="numeric" pattern="[0-9]*" maxlength="10" placeholder="Mobile Number" aria-label="Mobile number for enquiry">
            <button class="sendBtn" type="button" disabled>Send</button>
          </div>
        </div>
      </div>
    </div>

  </div>
</header>

<!-- PAGE CONTENT (gallery, footer, etc.) -->
<div class="page">
  <div class="gallery-container">

    <div class="gallery-box">
      <img class="gallery-bg" id="bg1" alt="">
      <div class="gallery-inner" id="g1">
        <img class="gallery-face gallery-front" alt="">
        <img class="gallery-face gallery-back" alt="">
      </div>
    </div>

    <div class="gallery-box">
      <img class="gallery-bg" id="bg2" alt="">
      <div class="gallery-inner" id="g2">
        <img class="gallery-face gallery-front" alt="">
        <img class="gallery-face gallery-back" alt="">
      </div>
    </div>

    <div class="gallery-box">
      <img class="gallery-bg" id="bg3" alt="">
      <div class="gallery-inner" id="g3">
        <img class="gallery-face gallery-front" alt="">
        <img class="gallery-face gallery-back" alt="">
      </div>
    </div>

    <div class="gallery-box">
      <video class="auto-video" id="autoVideo1" muted playsinline></video>
    </div>

    <div class="gallery-box">
      <video class="auto-video" id="autoVideo2" muted playsinline></video>
    </div>

  </div>
</div>

<footer>
  <div class="footer-card">
    <div class="footer-header">Bridal Packages</div>
    <div class="footer-content">
      <p><span class="item">HD Bridal Package</span><span class="dots"></span><span class="price">₹17,999</span></p>
      <p><small>Marriage + Haldi + Mehendi + Sangeet</small></p>
      <p><small>Products: Nars, HUDA, Dior, Kiko, MAC</small></p>

      <hr class="prod-line">

      <p style="margin-top:12px;"><span class="item">Basic Bridal Package</span><span class="dots"></span><span class="price">₹15,499</span></p>
      <p><small>Marriage + Haldi + Mehendi + Sangeet</small></p>
      <p><small>Products: Forever52, Krylon, Imagic, Europe Girl</small></p>

      <hr class="prod-line">

      <p style="margin-top:12px;"><strong>À la carte:</strong></p>
      <p>HD Bridal Makeup — ₹9,999</p>
      <p>Basic Bridal Makeup — ₹7,999</p>
      <p>Engagement Makeup — ₹4,999</p>
      <p>Mehendi Event Makeup — ₹3,500</p>
    </div>
  </div>

  <div class="footer-card">
    <div class="footer-header">Other Packages</div>
    <div class="footer-content">
      <p>Baby-Shower Package — ₹3,500</p>
      <p>Guest / Sider Package — ₹2,500</p>
      <p>Hair-Styling — ₹800</p>
      <p>Saree Draping — ₹500</p>
    </div>
  </div>

  <div class="footer-card">
    <div class="footer-header">Satisfied Souls</div>
    <div class="footer-content" style="height:320px; overflow:hidden;">
      <div id="shapo-widget-257ba450c00083ca8ad7"></div>
      <script id="shapo-embed-js" type="text/javascript" src="https://cdn.shapo.io/js/embed.js" defer></script>
    </div>
  </div>

  <div class="footer-card">
    <div class="footer-header">Policies - Must read</div>
    <div class="footer-content">
      <p>Kindly Book 2-3 weeks in advance</p>
      <p>Advance for booking - 30% of total</p>
      <p>Slot will be booked when Advance payment completed</p>
      <p>Makeup Artist will travel to venue (client pays travel)</p>
      <p>Trial amount adjusted, if booked</p>
    </div>
  </div>
</footer>

<p style="font-size:70%; text-align:center; margin-top:10px; opacity:0.7;">
  MS Bridal — Website published on Dec 8, 2025. All content is copyright-protected.
</p>

<!-- ---------------- SCRIPTS ---------------- -->
<script>
// ---------------- Gallery flip (kept as original behavior) ----------------
const folders = {
  gallery1: ['m1.jpg','m2.jpg','m3.jpg','m4.jpg','m5.jpg','m6.jpg','m7.jpg','m8.jpg','m9.jpg','m10.jpg','m11.jpg','m12.jpg','m13.jpg'],
  gallery2: ['n1.jpg','n2.jpg','n3.jpg','n4.jpg','n5.jpg','n6.jpg','n7.jpg','n8.jpg','n9.jpg','n10.jpg','n11.jpg','n12.jpg','n13.jpg'],
  gallery3: ['s1.jpg','s2.jpg','s3.jpg','s4.jpg','s5.jpg','s6.jpg','s7.jpg','s8.jpg','s9.jpg','s10.jpg','s11.jpg','s12.jpg','s13.jpg']
};
const paths = ["gallery1/","gallery2/","gallery3/"];

function getRandomIndex(len){ return Math.floor(Math.random()*len); }
function preload(src, cb){ const img=new Image(); img.onload=()=>cb(null,src); img.onerror=()=>cb(new Error('fail')); img.src=src; }

function setupGallery(gid,bgid,folder,files){
  const inner = document.getElementById(gid);
  const bgEl = document.getElementById(bgid);
  const front = inner.querySelector('.gallery-front');
  const back = inner.querySelector('.gallery-back');
  let flipped=false;
  let idxFront=getRandomIndex(files.length);
  let idxBack=getRandomIndex(files.length);
  while(idxBack===idxFront) idxBack=getRandomIndex(files.length);
  front.src = folder + files[idxFront];
  back.src  = folder + files[idxBack];
  bgEl.src  = front.src;
  function flip(){
    const nextIdx = getRandomIndex(files.length);
    const hidden = flipped ? front : back;
    const nextImage = folder + files[nextIdx];
    preload(nextImage, ()=> {
      hidden.src = nextImage;
      bgEl.src = nextImage;
      flipped = !flipped;
      requestAnimationFrame(()=> inner.classList.toggle('flipped'));
    });
  }
  return flip;
}

const flip1 = setupGallery('g1','bg1',paths[0],folders.gallery1);
const flip2 = setupGallery('g2','bg2',paths[1],folders.gallery2);
const flip3 = setupGallery('g3','bg3',paths[2],folders.gallery3);
const sequence = [flip1, flip3, flip2];
let seqIndex = 0;
function runSequence(){
  sequence[seqIndex]();
  seqIndex = (seqIndex + 1) % sequence.length;
  setTimeout(runSequence, 1000);
}
setTimeout(runSequence, 1000);

// ---------------- Auto-video playlists ----------------
function setupAutoGalleryVideo(videoId, fileCount, prefix){
  const player = document.getElementById(videoId);
  let index = 1;
  function playNext(){
    player.src = "videos/" + prefix + index + ".mp4";
    player.load();
    const p = player.play();
    if (p) p.catch(()=> setTimeout(()=>player.play(),200));
    index = (index % fileCount) + 1;
  }
  player.addEventListener('ended', playNext);
  playNext();
}
setupAutoGalleryVideo("autoVideo1", 6, "a");
setupAutoGalleryVideo("autoVideo2", 5, "b");

// ---------------- Header button behavior (height-swap animation) ----------------
document.addEventListener('DOMContentLoaded', () => {

  // detect hover-capable devices (desktop)
  const hasHover = window.matchMedia('(hover: hover) and (pointer: fine)').matches;

  // helper to show/hide form for a group
  function showFormFor(group){
    // close others
    document.querySelectorAll('.btn-group').forEach(g => {
      if (g !== group) hideFormFor(g);
    });

    const swap = group.querySelector('.swap');
    const form = group.querySelector('.inputForm');
    const btn  = group.querySelector('.header-btn');

    // open swap (this animates max-height)
    swap.classList.add('open');
    swap.setAttribute('aria-expanded','true');
    form.setAttribute('aria-hidden','false');
    btn.setAttribute('aria-expanded','true');

    // focus the input after animation start (small delay to allow visible change and mobile keyboard)
    setTimeout(()=> {
      const input = form.querySelector('.mobileInput');
      input && input.focus();
    }, 180);
  }

  function hideFormFor(group){
    const swap = group.querySelector('.swap');
    const form = group.querySelector('.inputForm');
    const btn  = group.querySelector('.header-btn');

    swap.classList.remove('open');
    swap.setAttribute('aria-expanded','false');
    form.setAttribute('aria-hidden','true');
    btn.setAttribute('aria-expanded','false');

    // clear input after closing animation to avoid flash
    setTimeout(()=> {
      const input = form.querySelector('.mobileInput');
      const send = form.querySelector('.sendBtn');
      if (input) input.value = '';
      if (send) send.disabled = true;
    }, 340);
  }

  // auto-hide timer per group
  const timers = new WeakMap();
  function resetTimer(group){
    clearTimeout(timers.get(group));
    const t = setTimeout(()=> hideFormFor(group), 2000);
    timers.set(group, t);
  }

  // attach handlers for each group
document.querySelectorAll('.btn-group').forEach(group => {
  const btn = group.querySelector('.header-btn');
  const form = group.querySelector('.inputForm');
  const input = form.querySelector('.mobileInput');
  const send = form.querySelector('.sendBtn');

  btn.addEventListener('click', () => {
    group.classList.add('active'); // show form, hide button
    input.focus();
  });

  // auto-hide when input loses focus (optional)
  input.addEventListener('blur', () => {
    setTimeout(() => {
      group.classList.remove('active'); // hide form, show button
      input.value = '';
      send.disabled = true;
    }, 200);
  });

  // enable send button only when 10 digits entered
  input.addEventListener('input', () => {
    input.value = input.value.replace(/\D/g,'').slice(0,10);
    send.disabled = input.value.length !== 10;
  });

  // Send action
  send.addEventListener('click', () => {
    const mobile = input.value.trim();
    if (mobile.length !== 10) return;
    const type = group.dataset.type;

    send.disabled = true;
    send.textContent = 'Sending...';

    fetch(`https://monasalwadi.pythonanywhere.com/send?mobile=${encodeURIComponent(mobile)}&type=${encodeURIComponent(type)}`)
      .then(resp => resp.json())
      .then(json => {
        alert(json.status === 'ok' ? "Message received!" : "Server error!");
        group.classList.remove('active');
        input.value = '';
        send.disabled = true;
        send.textContent = 'Send';
      })
      .catch(() => {
        alert("Network error!");
        send.disabled = false;
        send.textContent = 'Send';
      });
  });
});

    // Click / touch → toggle (mobile & desktop click)
    const openOnPointer = (ev) => {
      // Prevent default behavior on touchstart elsewhere; allow normal click
      // If form is currently visible, close it; else open it.
      if (form.getAttribute('aria-hidden') === 'false'){
        hideFormFor(group);
      } else {
        showFormFor(group);
        resetTimer(group);
      }
      // prevent double focus on touchstart
      ev.preventDefault && ev.preventDefault();
    };

    // Use touchstart for snappy mobile activation, but also support click
    btn.addEventListener('click', openOnPointer);
    btn.addEventListener('touchstart', (e) => {
      // prevent double activation on some devices
      e.preventDefault();
      openOnPointer(e);
    }, {passive:false});

    // Input events: validate numeric
    input.addEventListener('input', () => {
      input.value = input.value.replace(/\D/g,'').slice(0,10); // digits only, max 10
      send.disabled = input.value.trim().length !== 10;
      resetTimer(group);
    });

    input.addEventListener('focus', () => {
      resetTimer(group);
    });

    input.addEventListener('blur', () => {
      // keep it open shortly to avoid keyboard flicker; we'll auto-hide with timer
      resetTimer(group);
    });

    // Send action (real API)
    send.addEventListener('click', () => {
      const mobile = input.value.trim();
      if (mobile.length !== 10) return;
      const msgType = group.dataset.type || 'unknown';

      // disable UI while sending
      send.disabled = true;
      send.textContent = 'Sending...';

      fetch("https://monasalwadi.pythonanywhere.com/send?mobile=" + encodeURIComponent(mobile) + "&type=" + encodeURIComponent(msgType))
        .then(resp => resp.json())
        .then(json => {
          if (json && json.status === 'ok') {
            alert("Thank you — we received your message. We'll call you back soon.");
            hideFormFor(group);
          } else {
            alert("Server error, please try again.");
            send.disabled = false;
            send.textContent = 'Send';
          }
        })
        .catch(() => {
          alert("Network error — please try again.");
          send.disabled = false;
          send.textContent = 'Send';
        })
        .finally(() => {
          // restore button label if still visible
          setTimeout(()=> send.textContent = 'Send', 600);
        });
    });

  }); // end .btn-group loop
});
</script>
</body>
</html>
